{"version":3,"file":"Persona.js","sourceRoot":"../src/","sources":["components/Persona/Persona.tsx"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,6CASyB;AACzB,mCAAkC;AAClC,qCAA8D;AAC9D,iDAKyB;AACzB,iDAIyB;AACzB,6CAA+C;AAC/C,IAAM,MAAM,GAAQ,YAAY,CAAC;AAEjC,IAAM,cAAc;IAClB,GAAC,2BAAW,CAAC,eAAe,IAAG,EAAE;IACjC,GAAC,2BAAW,CAAC,MAAM,IAAG,EAAE;IACxB,GAAC,2BAAW,CAAC,IAAI,IAAG,EAAE;IACtB,GAAC,2BAAW,CAAC,UAAU,IAAG,EAAE;IAC5B,GAAC,2BAAW,CAAC,KAAK,IAAG,EAAE;IACvB,GAAC,2BAAW,CAAC,OAAO,IAAG,EAAE;IACzB,GAAC,2BAAW,CAAC,KAAK,IAAG,EAAE;IACvB,GAAC,2BAAW,CAAC,UAAU,IAAG,GAAG;OAC9B,CAAC;AAEF,yBAAyB;AACzB,IAAM,qBAAqB,GAA2B;IACpD,oCAAoB,CAAC,UAAU;IAC/B,oCAAoB,CAAC,SAAS;IAC9B,oCAAoB,CAAC,SAAS;IAC9B,oCAAoB,CAAC,KAAK;IAC1B,oCAAoB,CAAC,SAAS;IAC9B,oCAAoB,CAAC,IAAI;IACzB,oCAAoB,CAAC,OAAO;IAC5B,oCAAoB,CAAC,MAAM;IAC3B,oCAAoB,CAAC,KAAK;IAC1B,oCAAoB,CAAC,IAAI;IACzB,oCAAoB,CAAC,IAAI;IACzB,oCAAoB,CAAC,QAAQ;IAC7B,oCAAoB,CAAC,MAAM;IAC3B,oCAAoB,CAAC,OAAO;IAC5B,oCAAoB,CAAC,GAAG;CACzB,CAAC;AAEF,IAAM,0BAA0B,GAAG,qBAAqB,CAAC,MAAM,CAAC;AAMhE;IAA6B,mCAA2C;IAQtE,iBAAY,KAAoB;QAAhC,YACE,kBAAM,KAAK,CAAC,SAKb;QAHC,KAAI,CAAC,KAAK,GAAG;YACX,aAAa,EAAE,KAAK;SACrB,CAAC;;IACJ,CAAC;IAEM,wBAAM,GAAb;QACM,IAAA,eAkBU,EAjBZ,wBAAS,EACT,sBAAQ,EACR,sBAAQ,EACR,gCAAa,EACb,sBAAQ,EACR,4BAAW,EACX,gCAAa,EACb,8BAAY,EACZ,8BAAY,EACZ,0CAAkB,EAClB,wCAAiB,EACjB,wBAAyC,EAAzC,8DAAyC,EACzC,4CAAmB,EACnB,gDAAqB,EACrB,8CAAoB,EACpB,8CAAoB,EACpB,oDAAuB,CACV;QACf,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAmB,CAAC;QAE1C,aAAa,GAAG,aAAa,KAAK,SAAS,IAAI,aAAa,KAAK,IAAI,GAAG,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;QAE5H,IAAI,eAAe,GAAG,IAAI,CAAC;QAC3B,EAAE,CAAC,CAAC,QAAQ,KAAK,+BAAe,CAAC,IAAI,CAAC,CAAC,CAAC;YACtC,IAAI,YAAY,GAAG,+BAAe,CAAC,QAA2B,CAAC,EAC7D,UAAU,GAAG,IAAI,CAAC;YACpB,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACrB,KAAK,QAAQ;oBACX,YAAY,GAAG,YAAY,CAAC;oBAC5B,KAAK,CAAC;gBACR,KAAK,MAAM;oBACT,YAAY,GAAG,YAAY,CAAC;oBAC5B,KAAK,CAAC;gBACR,KAAK,KAAK;oBACR,YAAY,GAAG,YAAY,CAAC;oBAC5B,KAAK,CAAC;gBACR;oBACE,YAAY,GAAG,EAAE,CAAC;YACtB,CAAC;YACD,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjB,UAAU,GAAG,CACX,oBAAC,WAAI,IAAC,SAAS,EAAG,eAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,YAAY,CAAC,EAAG,QAAQ,EAAG,YAAY,GAAK,CACrG,CAAC;YACJ,CAAC;YACD,eAAe,GAAG,6BAAK,SAAS,EAAG,eAAG,CAAC,qBAAqB,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAK,UAAU,CAAQ,CAAC;QACxG,CAAC;QAED,IAAI,QAAQ,GAAG,0BAAc,CAAC,IAAI,CAAC,KAAK,EAAE,yBAAa,CAAC,CAAC;QACzD,IAAI,cAAc,GAAG,6BAAK,SAAS,EAAG,eAAG,CAAC,oBAAoB,EAAE,MAAM,CAAC,OAAO,CAAC;YAC3E,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,WAAW,EACtB,eAAG,CAAC,wBAAwB,EAAE,MAAM,CAAC,WAAW,CAAC,EACjD,mBAAmB,CAAC;YACpB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,aAAa,EACxB,eAAG,CAAC,0BAA0B,EAAE,MAAM,CAAC,aAAa,CAAC,EACrD,qBAAqB,CAAC;YACtB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,YAAY,EACvB,eAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,YAAY,CAAC,EACnD,oBAAoB,CAAC;YACrB,IAAI,CAAC,cAAc,CACnB,IAAI,CAAC,KAAK,CAAC,YAAY,EACvB,eAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,YAAY,CAAC,EACnD,oBAAoB,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,CAAC;QAEP,MAAM,CAAC,CACL,gDACO,QAAQ,IACb,SAAS,EAAG,eAAG,CAAC,YAAY,EAAE,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,4BAAY,CAAC,IAAI,CAAC,EAAE,gCAAgB,CAAC,QAA2B,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,MAAM,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAEpL,IAAI,KAAK,2BAAW,CAAC,IAAI,IAAI,CAC7B,6BAAK,SAAS,EAAG,eAAG,CAAC,sBAAsB,EAAE,MAAM,CAAC,SAAS,CAAC;gBAE1D,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;oBACzB,CACE,6BACE,SAAS,EAAG,eAAG,CACb,qBAAqB,EACrB,MAAM,CAAC,QAAQ,EACf,sCAAsB,CAAC,aAAa,CAAC,CACtC,iBACW,MAAM,IAEhB,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAClD,CACP;gBAEH,oBAAC,aAAK,IACJ,SAAS,EAAG,eAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,EACjD,QAAQ,EAAG,gBAAQ,CAAC,KAAK,EACzB,GAAG,EAAG,QAAQ,EACd,KAAK,EAAG,cAAc,CAAC,IAAI,CAAC,EAC5B,MAAM,EAAG,cAAc,CAAC,IAAI,CAAC,EAC7B,GAAG,EAAG,QAAQ,EACd,YAAY,EAAG,iBAAiB,EAChC,kBAAkB,EAAG,uBAAuB,EAC5C,oBAAoB,EAAG,IAAI,CAAC,0BAA0B,GAAK,CACzD,CACP;YACC,eAAe;YACf,CAAC,CAAC,kBAAkB,IAAI,CAAC,IAAI,KAAK,2BAAW,CAAC,IAAI,CAAC,CAAC,IAAI,cAAc,CACpE,CACP,CAAC;IACJ,CAAC;IAGO,gCAAc,GAAtB,UAAuB,IAAwB,EAAE,SAAiB,EAAE,MAAuC;QACzG,MAAM,CAAC,CACL,6BAAK,SAAS,EAAG,SAAS,IACtB,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAChC,CACP,CAAC;IACJ,CAAC;IAGO,mCAAiB,GAAzB,UAA0B,KAAoB;QAE1C,IAAA,mCAAa,EACb,+BAAW,CACH;QAEV,IAAI,KAAK,GAAG,kBAAM,EAAE,CAAC;QAErB,aAAa,GAAG,aAAa,IAAI,uBAAW,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAEjE,MAAM,CAAC,CACL,kCAAQ,aAAa,CAAS,CAC/B,CAAC;IACJ,CAAC;IAEO,mCAAiB,GAAzB,UAA0B,WAA+B;QACvD,IAAI,KAAK,GAAG,oCAAoB,CAAC,IAAI,CAAC;QACtC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YACjB,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,GAAG,CAAC,CAAC,IAAI,IAAI,GAAW,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC;YAClE,IAAM,EAAE,GAAW,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAChD,IAAM,KAAK,GAAW,IAAI,GAAG,CAAC,CAAC;YAC/B,sCAAsC;YACtC,QAAQ,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QAClD,CAAC;QAED,KAAK,GAAG,qBAAqB,CAAC,QAAQ,GAAG,0BAA0B,CAAC,CAAC;QAErE,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAGO,4CAA0B,GAAlC,UAAmC,SAAyB;QAC1D,IAAI,CAAC,QAAQ,CAAC;YACZ,aAAa,EAAE,SAAS,KAAK,sBAAc,CAAC,MAAM;SACnD,CAAC,CAAC;IACL,CAAC;IA9Ka,oBAAY,GAAkB;QAC1C,WAAW,EAAE,EAAE;QACf,IAAI,EAAE,2BAAW,CAAC,OAAO;QACzB,QAAQ,EAAE,+BAAe,CAAC,IAAI;QAC9B,QAAQ,EAAE,EAAE;KACb,CAAC;IAyHF;QADC,oBAAQ;iDAOR;IAGD;QADC,oBAAQ;oDAcR;IAsBD;QADC,oBAAQ;6DAKR;IACH,cAAC;CAAA,AAhLD,CAA6B,yBAAa,GAgLzC;AAhLY,0BAAO","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  autobind,\n  css,\n  divProperties,\n  getInitials,\n  getNativeProps,\n  getRTL,\n  IRenderFunction\n} from '../../Utilities';\nimport { Icon } from '../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../Image';\nimport {\n  IPersonaProps,\n  PersonaInitialsColor,\n  PersonaPresence,\n  PersonaSize\n} from './Persona.Props';\nimport {\n  PERSONA_INITIALS_COLOR,\n  PERSONA_PRESENCE,\n  PERSONA_SIZE\n} from './PersonaConsts';\nimport * as stylesImport from './Persona.scss';\nconst styles: any = stylesImport;\n\nconst SIZE_TO_PIXELS = {\n  [PersonaSize.extraExtraSmall]: 24,\n  [PersonaSize.size28]: 28,\n  [PersonaSize.tiny]: 30,\n  [PersonaSize.extraSmall]: 32,\n  [PersonaSize.small]: 40,\n  [PersonaSize.regular]: 48,\n  [PersonaSize.large]: 72,\n  [PersonaSize.extraLarge]: 100\n};\n\n// The RGB color swatches\nconst COLOR_SWATCHES_LOOKUP: PersonaInitialsColor[] = [\n  PersonaInitialsColor.lightGreen,\n  PersonaInitialsColor.lightBlue,\n  PersonaInitialsColor.lightPink,\n  PersonaInitialsColor.green,\n  PersonaInitialsColor.darkGreen,\n  PersonaInitialsColor.pink,\n  PersonaInitialsColor.magenta,\n  PersonaInitialsColor.purple,\n  PersonaInitialsColor.black,\n  PersonaInitialsColor.teal,\n  PersonaInitialsColor.blue,\n  PersonaInitialsColor.darkBlue,\n  PersonaInitialsColor.orange,\n  PersonaInitialsColor.darkRed,\n  PersonaInitialsColor.red\n];\n\nconst COLOR_SWATCHES_NUM_ENTRIES = COLOR_SWATCHES_LOOKUP.length;\n\nexport interface IPersonaState {\n  isImageLoaded?: boolean;\n}\n\nexport class Persona extends BaseComponent<IPersonaProps, IPersonaState> {\n  public static defaultProps: IPersonaProps = {\n    primaryText: '',\n    size: PersonaSize.regular,\n    presence: PersonaPresence.none,\n    imageAlt: ''\n  };\n\n  constructor(props: IPersonaProps) {\n    super(props);\n\n    this.state = {\n      isImageLoaded: false,\n    };\n  }\n\n  public render() {\n    let {\n      className,\n      imageUrl,\n      imageAlt,\n      initialsColor,\n      presence,\n      primaryText,\n      secondaryText,\n      tertiaryText,\n      optionalText,\n      hidePersonaDetails,\n      imageShouldFadeIn,\n      onRenderInitials = this._onRenderInitials,\n      onRenderPrimaryText,\n      onRenderSecondaryText,\n      onRenderTertiaryText,\n      onRenderOptionalText,\n      imageShouldStartVisible\n    } = this.props;\n    let size = this.props.size as PersonaSize;\n\n    initialsColor = initialsColor !== undefined && initialsColor !== null ? initialsColor : this._getColorFromName(primaryText);\n\n    let presenceElement = null;\n    if (presence !== PersonaPresence.none) {\n      let userPresence = PersonaPresence[presence as PersonaPresence],\n        statusIcon = null;\n      switch (userPresence) {\n        case 'online':\n          userPresence = 'SkypeCheck';\n          break;\n        case 'away':\n          userPresence = 'SkypeClock';\n          break;\n        case 'dnd':\n          userPresence = 'SkypeMinus';\n          break;\n        default:\n          userPresence = '';\n      }\n      if (userPresence) {\n        statusIcon = (\n          <Icon className={ css('ms-Persona-presenceIcon', styles.presenceIcon) } iconName={ userPresence } />\n        );\n      }\n      presenceElement = <div className={ css('ms-Persona-presence', styles.presence) }>{ statusIcon }</div>;\n    }\n\n    let divProps = getNativeProps(this.props, divProperties);\n    let personaDetails = <div className={ css('ms-Persona-details', styles.details) }>\n      { this._renderElement(\n        this.props.primaryText,\n        css('ms-Persona-primaryText', styles.primaryText),\n        onRenderPrimaryText) }\n      { this._renderElement(\n        this.props.secondaryText,\n        css('ms-Persona-secondaryText', styles.secondaryText),\n        onRenderSecondaryText) }\n      { this._renderElement(\n        this.props.tertiaryText,\n        css('ms-Persona-tertiaryText', styles.tertiaryText),\n        onRenderTertiaryText) }\n      { this._renderElement(\n        this.props.optionalText,\n        css('ms-Persona-optionalText', styles.optionalText),\n        onRenderOptionalText) }\n      { this.props.children }\n    </div>;\n\n    return (\n      <div\n        { ...divProps }\n        className={ css('ms-Persona', styles.root, className, PERSONA_SIZE[size], PERSONA_PRESENCE[presence as PersonaPresence], this.props.showSecondaryText ? styles.showSecondaryText : '') }\n      >\n        { size !== PersonaSize.tiny && (\n          <div className={ css('ms-Persona-imageArea', styles.imageArea) }>\n            {\n              !this.state.isImageLoaded &&\n              (\n                <div\n                  className={ css(\n                    'ms-Persona-initials',\n                    styles.initials,\n                    PERSONA_INITIALS_COLOR[initialsColor]\n                  ) }\n                  aria-hidden='true'\n                >\n                  { onRenderInitials(this.props, this._onRenderInitials) }\n                </div>\n              )\n            }\n            <Image\n              className={ css('ms-Persona-image', styles.image) }\n              imageFit={ ImageFit.cover }\n              src={ imageUrl }\n              width={ SIZE_TO_PIXELS[size] }\n              height={ SIZE_TO_PIXELS[size] }\n              alt={ imageAlt }\n              shouldFadeIn={ imageShouldFadeIn }\n              shouldStartVisible={ imageShouldStartVisible }\n              onLoadingStateChange={ this._onPhotoLoadingStateChange } />\n          </div>\n        ) }\n        { presenceElement }\n        { (!hidePersonaDetails || (size === PersonaSize.tiny)) && personaDetails }\n      </div>\n    );\n  }\n\n  @autobind\n  private _renderElement(text: string | undefined, className: string, render?: IRenderFunction<IPersonaProps>): JSX.Element {\n    return (\n      <div className={ className }>\n        { render ? render(this.props) : text }\n      </div>\n    );\n  }\n\n  @autobind\n  private _onRenderInitials(props: IPersonaProps): JSX.Element {\n    let {\n      imageInitials,\n      primaryText\n    } = props;\n\n    let isRTL = getRTL();\n\n    imageInitials = imageInitials || getInitials(primaryText, isRTL);\n\n    return (\n      <span>{ imageInitials }</span>\n    );\n  }\n\n  private _getColorFromName(displayName: string | undefined): PersonaInitialsColor {\n    let color = PersonaInitialsColor.blue;\n    if (!displayName) {\n      return color;\n    }\n\n    let hashCode = 0;\n    for (let iLen: number = displayName.length - 1; iLen >= 0; iLen--) {\n      const ch: number = displayName.charCodeAt(iLen);\n      const shift: number = iLen % 8;\n      // tslint:disable-next-line:no-bitwise\n      hashCode ^= (ch << shift) + (ch >> (8 - shift));\n    }\n\n    color = COLOR_SWATCHES_LOOKUP[hashCode % COLOR_SWATCHES_NUM_ENTRIES];\n\n    return color;\n  }\n\n  @autobind\n  private _onPhotoLoadingStateChange(loadState: ImageLoadState) {\n    this.setState({\n      isImageLoaded: loadState === ImageLoadState.loaded\n    });\n  }\n}\n"]}