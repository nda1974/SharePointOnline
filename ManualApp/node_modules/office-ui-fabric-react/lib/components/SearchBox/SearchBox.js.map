{"version":3,"file":"SearchBox.js","sourceRoot":"../src/","sources":["components/SearchBox/SearchBox.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { ISearchBoxProps } from './SearchBox.Props';\nimport {\n  BaseComponent,\n  autobind,\n  css,\n  getId,\n  KeyCodes\n} from '../../Utilities';\n\nimport { Icon } from '../../Icon';\nimport * as stylesImport from './SearchBox.scss';\nconst styles: any = stylesImport;\n\nexport interface ISearchBoxState {\n  value?: string;\n  hasFocus?: boolean;\n  id?: string;\n}\n\nexport class SearchBox extends BaseComponent<ISearchBoxProps, ISearchBoxState> {\n  public static defaultProps: ISearchBoxProps = {\n    labelText: 'Search',\n  };\n\n  private _rootElement: HTMLElement;\n  private _inputElement: HTMLInputElement;\n  private _latestValue: string;\n\n  public constructor(props: ISearchBoxProps) {\n    super(props);\n\n    this.state = {\n      value: props.value || '',\n      hasFocus: false,\n      id: getId('SearchBox')\n    };\n  }\n\n  public componentWillReceiveProps(newProps: ISearchBoxProps) {\n    if (newProps.value !== undefined) {\n      this._latestValue = newProps.value;\n      this.setState({\n        value: newProps.value\n      });\n    }\n  }\n\n  public render() {\n    let { labelText, className, disabled } = this.props;\n    let { value, hasFocus, id } = this.state;\n    return (\n      <div\n        ref={ this._resolveRef('_rootElement') }\n        className={ css('ms-SearchBox', className, styles.root, {\n          ['is-active ' + styles.rootIsActive]: hasFocus,\n          ['is-disabled ' + styles.rootIsDisabled]: disabled,\n          ['can-clear ' + styles.rootCanClear]: value!.length > 0,\n        }) }\n        { ...{ onFocusCapture: this._onFocusCapture } }\n      >\n        <div\n          className={ css('ms-SearchBox-iconContainer', styles.iconContainer) }\n        >\n          <Icon className={ css('ms-SearchBox-icon', styles.icon) } iconName='Search' />\n        </div>\n        <input\n          id={ id }\n          className={ css('ms-SearchBox-field', styles.field) }\n          placeholder={ labelText }\n          onChange={ this._onInputChange }\n          onInput={ this._onInputChange }\n          onKeyDown={ this._onKeyDown }\n          value={ value }\n          disabled={ this.props.disabled }\n          aria-label={ this.props.ariaLabel ? this.props.ariaLabel : this.props.labelText }\n          ref={ this._resolveRef('_inputElement') }\n        />\n        <div\n          className={ css('ms-SearchBox-clearButton', styles.clearButton) }\n          onClick={ this._onClearClick }\n        >\n          <Icon iconName='Clear' />\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Sets focus to the search box input field\n   */\n  public focus() {\n    if (this._inputElement) {\n      this._inputElement.focus();\n    }\n  }\n\n  @autobind\n  private _onClearClick(ev?: any) {\n    this._latestValue = '';\n    this.setState({\n      value: ''\n    });\n    this._callOnChange('');\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    this._inputElement.focus();\n  }\n\n  @autobind\n  private _onFocusCapture(ev: React.FocusEvent<HTMLElement>) {\n    this.setState({\n      hasFocus: true\n    });\n\n    this._events.on(this._rootElement, 'blur', this._onBlur, true);\n\n    if (this.props.onFocus) {\n      this.props.onFocus(ev as React.FocusEvent<HTMLInputElement>);\n    }\n  }\n\n  @autobind\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLInputElement>) {\n    switch (ev.which) {\n\n      case KeyCodes.escape:\n        this._onClearClick(ev);\n        break;\n\n      case KeyCodes.enter:\n        if (this.props.onSearch && this.state.value!.length > 0) {\n          this.props.onSearch(this.state.value);\n        }\n        break;\n\n      default:\n        return;\n    }\n\n    // We only get here if the keypress has been handled.\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  @autobind\n  private _onBlur(ev: React.FocusEvent<HTMLInputElement>) {\n    this._events.off(this._rootElement, 'blur');\n    this.setState({\n      hasFocus: false\n    });\n\n    if (this.props.onBlur) {\n      this.props.onBlur(ev);\n    }\n  }\n\n  @autobind\n  private _onInputChange(ev: React.ChangeEvent<HTMLInputElement>) {\n    const value = this._inputElement.value;\n    if (value === this._latestValue) {\n      return;\n    }\n    this._latestValue = value;\n\n    this.setState({ value });\n    this._callOnChange(value);\n  }\n\n  private _callOnChange(newValue: string): void {\n    let { onChange, onChanged } = this.props;\n\n    // Call @deprecated method.\n    if (onChanged) {\n      onChanged(newValue);\n    }\n\n    if (onChange) {\n      onChange(newValue);\n    }\n  }\n}\n"]}