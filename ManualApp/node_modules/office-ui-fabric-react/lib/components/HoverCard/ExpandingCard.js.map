{"version":3,"file":"ExpandingCard.js","sourceRoot":"../src/","sources":["components/HoverCard/ExpandingCard.tsx"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable:no-unused-variable */\nimport * as React from 'react';\n/* tslint:enable:no-unused-variable */\nimport {\n  BaseComponent,\n  css,\n  getNativeProps,\n  divProperties,\n  customizable,\n  autobind,\n  getRTL\n} from '../../Utilities';\nimport { IExpandingCardProps, IExpandingCardStyles, ExpandingCardMode } from './ExpandingCard.Props';\nimport { Callout, ICallout } from '../../Callout';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { AnimationClassNames, mergeStyles } from '../../Styling';\n\nimport { getStyles } from './ExpandingCard.styles';\n\nexport interface IExpandingCardState {\n  firstFrameRendered: boolean;\n  needsScroll: boolean;\n}\n\n@customizable(['theme'])\nexport class ExpandingCard extends BaseComponent<IExpandingCardProps, IExpandingCardState> {\n  public static defaultProps = {\n    compactCardHeight: 156,\n    expandedCardHeight: 384,\n    directionalHint: DirectionalHint.bottomLeftEdge,\n    gapSpace: 0\n  };\n\n  private _styles: IExpandingCardStyles;\n  private _callout: ICallout;\n  private _expandedElem: HTMLDivElement;\n\n  constructor(props: IExpandingCardProps) {\n    super(props);\n\n    this.state = {\n      firstFrameRendered: false,\n      needsScroll: false\n    };\n  }\n\n  public componentDidMount() {\n    if (this._expandedElem && this._expandedElem.scrollHeight >= (this.props.expandedCardHeight as number)) {\n      this.setState({\n        needsScroll: true\n      });\n    }\n  }\n\n  public componentWillUnmount() {\n    this._async.dispose();\n  }\n\n  public render() {\n    const {\n      targetElement,\n      id,\n      theme,\n      styles: customStyles,\n      onRenderCompactCard,\n      onRenderExpandedCard,\n      compactCardHeight,\n      expandedCardHeight\n    } = this.props;\n    this._styles = getStyles(theme!, customStyles);\n\n    return (\n      <Callout\n        { ...getNativeProps(this.props, divProperties) }\n        componentRef={ this._resolveRef('_callout') }\n        className={ css(\n          AnimationClassNames.scaleUpIn100,\n          this._styles.root\n        ) }\n        targetElement={ targetElement }\n        isBeakVisible={ false }\n        directionalHint={ this.props.directionalHint }\n        directionalHintFixed={ true }\n        finalHeight={ compactCardHeight! + expandedCardHeight! }\n        minPagePadding={ 24 }\n        gapSpace={ this.props.gapSpace }\n      >\n        <div\n          onFocusCapture={ this.props.onEnter }\n          onBlurCapture={ this.props.onLeave }\n          onMouseEnter={ this.props.onEnter }\n          onMouseLeave={ this.props.onLeave }\n        >\n          { this._onRenderCompactCard() }\n          { this._onRenderExpandedCard() }\n        </div>\n      </Callout >\n    );\n  }\n\n  @autobind\n  private _onRenderCompactCard(): JSX.Element {\n    return (\n      <div className={ mergeStyles(this._styles.compactCard, { height: this.props.compactCardHeight + 'px' }) as string }>\n        { this.props.onRenderCompactCard!(this.props.renderData) }\n      </div>\n    );\n  }\n\n  @autobind\n  private _onRenderExpandedCard(): JSX.Element {\n    // firstFrameRendered helps in initially setting height of expanded card to 1px, even if\n    // mode prop is set to ExpandingCardMode.expanded on first render. This is to make sure transition animation takes place.\n    !this.state.firstFrameRendered && this._async.requestAnimationFrame(() => {\n      this.setState({\n        firstFrameRendered: true\n      });\n    });\n\n    return (\n      <div className={ mergeStyles(\n        this._styles.expandedCard,\n        this.props.mode === ExpandingCardMode.expanded && this.state.firstFrameRendered && { height: this.props.expandedCardHeight + 'px' },\n        this.state.needsScroll && { 'overflow-y': 'auto' }\n      ) as string }\n        ref={ this._resolveRef('_expandedElem') }\n      >\n        <div className={ this._styles.expandedCardScroll as string }>\n          { this.props.onRenderExpandedCard && this.props.onRenderExpandedCard(this.props.renderData) }\n        </div>\n      </div>\n    );\n  }\n\n  @autobind\n  private _checkNeedsScroll(): void {\n    if (this._expandedElem) {\n      this._async.requestAnimationFrame(() => {\n        if (this._expandedElem.scrollHeight >= this.props.expandedCardHeight!) {\n          this.setState({\n            needsScroll: true\n          });\n        }\n      });\n    }\n  }\n}\n"]}