{"version":3,"file":"Nav.js","sourceRoot":"../src/","sources":["components/Nav/Nav.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  autobind,\n  BaseComponent,\n  css,\n  getRTL\n} from '../../Utilities';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { CommandButton } from '../../Button';\nimport { Icon } from '../../Icon';\nimport * as stylesImport from './Nav.scss';\nconst styles: any = stylesImport;\nimport { AnimationClassNames } from '../../Styling';\nimport {\n  INav,\n  INavProps,\n  INavLinkGroup,\n  INavLink\n} from './Nav.Props';\n\n// The number pixels per indentation level for Nav links.\nconst _indentationSize: number = 14;\n// Tne number of pixels of left margin when there is expand/collaps button\nconst _indentWithExpandButton: number = 28;\n// Tne number of pixels of left margin when there is expand/collaps button\nconst _indentNoExpandButton: number = 20;\n\n// global var used in _isLinkSelectedKey\nlet _urlResolver: HTMLAnchorElement | undefined;\n\nexport function isRelativeUrl(url: string): boolean {\n  // A URL is relative if it has no protocol.\n  return !!url && !/^[a-z0-9+-.]:\\/\\//i.test(url);\n}\n\nexport interface INavState {\n  isGroupCollapsed?: { [key: string]: boolean };\n  isLinkExpandStateChanged?: boolean;\n  selectedKey?: string;\n}\n\nexport class Nav extends BaseComponent<INavProps, INavState> implements INav {\n\n  public static defaultProps: INavProps = {\n    groups: null,\n    onRenderLink: (link: INavLink) => (<span className={ css('ms-Nav-linkText', styles.linkText) }>{ link.name }</span>)\n  };\n\n  private _hasExpandButton: boolean;\n\n  constructor(props: INavProps) {\n    super(props);\n\n    this.state = {\n      isGroupCollapsed: {},\n      isLinkExpandStateChanged: false,\n      selectedKey: props.initialSelectedKey || props.selectedKey,\n    };\n\n    if (props.groups) {\n      for (let group of props.groups) {\n        if (group.collapseByDefault && group.name) {\n          this.state.isGroupCollapsed![group.name] = true;\n        }\n      }\n    }\n    this._hasExpandButton = false;\n  }\n\n  public componentWillReceiveProps(newProps: INavProps) {\n    let newGroups = newProps.groups || [];\n    let isGroupCollapsed = this.state.isGroupCollapsed!;\n\n    // If the component's props were updated, new groups may have been added, which may have\n    // collapseByDefault set. Ensure that setting is respected for any new groups.\n    // (If isGroupCollapsed is already set for a group, don't overwrite that.)\n    let hasUpdated = false;\n    for (let newGroup of newGroups) {\n      if (newGroup.name && newGroup.collapseByDefault && !isGroupCollapsed.hasOwnProperty(newGroup.name)) {\n        isGroupCollapsed[newGroup.name] = true;\n        hasUpdated = true;\n      }\n    }\n\n    if (hasUpdated) {\n      this.setState({\n        isGroupCollapsed: isGroupCollapsed\n      });\n    }\n  }\n\n  public render(): JSX.Element | null {\n    const { groups, className, isOnTop } = this.props;\n\n    if (!groups) {\n      return null;\n    }\n\n    // When groups[x].name is specified or any of the links have children, the expand/collapse\n    // chevron button is shown and different padding is needed. _hasExpandButton marks this condition.\n    this._hasExpandButton = groups.some((group: INavLinkGroup) => {\n      return group ? !!group.name || (group.links && group.links.some((link: INavLink) => {\n        return !!(link && link.links && link.links.length);\n      })) : false;\n    });\n\n    const groupElements: React.ReactElement<{}>[] = groups.map(this._renderGroup);\n\n    return (\n      <FocusZone direction={ FocusZoneDirection.vertical }>\n        <nav role='navigation'\n          className={ css(\n            'ms-Nav',\n            styles.root,\n            className,\n            isOnTop && css('is-onTop', styles.rootIsOnTop, AnimationClassNames.slideRightIn40)\n          ) }>\n          { groupElements }\n        </nav>\n      </FocusZone>\n    );\n  }\n\n  public get selectedKey(): string | undefined {\n    return this.state.selectedKey;\n  }\n\n  private _renderAnchorLink(link: INavLink, linkIndex: number, nestingLevel: number): React.ReactElement<{}> {\n    // Determine the appropriate padding to add before this link.\n    // In RTL, the \"before\" padding will go on the right instead of the left.\n    const isRtl: boolean = getRTL();\n    const paddingBefore = _indentationSize * nestingLevel +\n      (this._hasExpandButton ? _indentWithExpandButton : _indentNoExpandButton);\n    // Prevent hijacking of the parent window if link.target is defined\n    const rel = link.url && link.target && !isRelativeUrl(link.url) ? 'noopener noreferrer' : undefined;\n\n    return (\n      <a\n        className={ css('ms-Nav-link', styles.link) }\n        style={ { [isRtl ? 'paddingRight' : 'paddingLeft']: paddingBefore + 'px' } }\n        href={ link.url || 'javascript:' }\n        onClick={ this._onNavAnchorLinkClicked.bind(this, link) }\n        aria-label={ link.ariaLabel }\n        title={ link.title || link.name }\n        target={ link.target }\n        rel={ rel }\n      >\n        { link.iconClassName && (\n          <Icon\n            className={ css(link.iconClassName, styles.iconLink) }\n            iconName='IconLink'\n          />\n        ) }\n        { this.props.onRenderLink!(link) }\n      </a>\n    );\n  }\n\n  private _renderButtonLink(link: INavLink, linkIndex: number) {\n    return (\n      <CommandButton\n        className={ css(\n          'ms-Nav-link ms-Nav-linkButton',\n          styles.link,\n          this._hasExpandButton && 'isOnExpanded ' + styles.linkIsOnExpanded\n        ) }\n        href={ link.url }\n        iconProps={ { iconName: link.icon } }\n        description={ link.title || link.name }\n        onClick={ this._onNavButtonLinkClicked.bind(this, link) }>\n        { link.name }\n      </CommandButton>);\n  }\n\n  private _renderCompositeLink(link: INavLink, linkIndex: number, nestingLevel: number): React.ReactElement<{}> {\n    const isLinkSelected: boolean = this._isLinkSelected(link);\n    const isRtl: boolean = getRTL();\n    const paddingBefore: string = `${_indentationSize * nestingLevel}px`;\n\n    return (\n      <div key={ link.key || linkIndex }\n        className={ css(\n          'ms-Nav-compositeLink',\n          styles.compositeLink,\n          !!link.isExpanded && 'is-expanded',\n          isLinkSelected && 'is-selected',\n          !!link.isExpanded && styles.compositeLinkIsExpanded,\n          isLinkSelected && styles.compositeLinkIsSelected\n        ) }>\n        { (link.links && link.links.length > 0 ?\n          <button\n            style={ { [isRtl ? 'marginRight' : 'marginLeft']: paddingBefore } }\n            className={ css('ms-Nav-chevronButton ms-Nav-chevronButton--link', styles.chevronButton, styles.chevronButtonLink) }\n            onClick={ this._onLinkExpandClicked.bind(this, link) }\n            aria-label={ this.props.expandButtonAriaLabel }\n            aria-expanded={ link.isExpanded ? 'true' : 'false' }\n          >\n            <Icon\n              className={ css('ms-Nav-chevron', styles.chevronIcon, link.isExpanded) }\n              iconName='ChevronDown'\n            />\n          </button> : null\n        ) }\n        { link.onClick && !link.forceAnchor\n          ? this._renderButtonLink(link, linkIndex)\n          : this._renderAnchorLink(link, linkIndex, nestingLevel) }\n      </div>\n    );\n  }\n\n  private _renderLink(link: INavLink, linkIndex: number, nestingLevel: number): React.ReactElement<{}> {\n    return (\n      <li key={ link.key || linkIndex } role='listitem' className={ css(styles.navItem) }>\n        { this._renderCompositeLink(link, linkIndex, nestingLevel) }\n        { (link.isExpanded ? this._renderLinks(link.links, ++nestingLevel) : null) }\n      </li>\n    );\n  }\n\n  private _renderLinks(links: INavLink[] | undefined, nestingLevel: number): React.ReactElement<{}> | null {\n    if (!links || !links.length) {\n      return null;\n    }\n    const linkElements: React.ReactElement<{}>[] = links.map(\n      (link: INavLink, linkIndex: number) => this._renderLink(link, linkIndex, nestingLevel));\n\n    return (\n      <ul role='list' aria-label={ this.props.ariaLabel } className={ css(styles.navItems) }>\n        { linkElements }\n      </ul>\n    );\n  }\n\n  @autobind\n  private _renderGroup(group: INavLinkGroup, groupIndex: number): React.ReactElement<{}> {\n    const isGroupExpanded: boolean = !this.state.isGroupCollapsed![group.name!];\n\n    return (\n      <div\n        key={ groupIndex }\n        className={ css(\n          'ms-Nav-group',\n          styles.group,\n          isGroupExpanded && ('is-expanded ' + styles.groupIsExpanded)\n        ) }>\n        { (group.name ?\n          <button\n            className={ css('ms-Nav-chevronButton ms-Nav-chevronButton--group ms-Nav-groupHeaderFontSize', styles.chevronButton, styles.chevronButtonIsGroup, styles.groupHeaderFontSize) }\n            onClick={ this._onGroupHeaderClicked.bind(this, group) }\n          >\n            <Icon\n              className={ css(\n                'ms-Nav-chevron',\n                styles.chevronIcon,\n                isGroupExpanded && styles.chevronIsExpanded\n              ) }\n              iconName='ChevronDown'\n            />\n            { group.name }\n          </button> : null)\n        }\n        <div className={ css('ms-Nav-groupContent', AnimationClassNames.slideDownIn20, styles.groupContent) }>\n          { this._renderLinks(group.links, 0 /* nestingLevel */) }\n        </div>\n      </div>\n    );\n  }\n\n  private _onGroupHeaderClicked(group: INavLinkGroup, ev: React.MouseEvent<HTMLElement>): void {\n    let { isGroupCollapsed } = this.state;\n    let groupKey = group.name!;\n    let isCollapsed = !isGroupCollapsed![groupKey];\n\n    if (group.onHeaderClick) {\n      group.onHeaderClick(ev, isCollapsed);\n    }\n\n    isGroupCollapsed![groupKey] = isCollapsed;\n    this.setState({ isGroupCollapsed: isGroupCollapsed });\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  private _onLinkExpandClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    link.isExpanded = !link.isExpanded;\n    this.setState({ isLinkExpandStateChanged: true });\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  private _onNavAnchorLinkClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    if (this.props.onLinkClick) {\n      this.props.onLinkClick(ev, link);\n    }\n\n    this.setState({ selectedKey: link.key });\n  }\n\n  private _onNavButtonLinkClicked(link: INavLink, ev: React.MouseEvent<HTMLElement>): void {\n    if (link.onClick) {\n      link.onClick(ev, link);\n    }\n\n    this.setState({ selectedKey: link.key });\n  }\n\n  private _isLinkSelected(link: INavLink): boolean {\n    // if caller passes in selectedKey, use it as first choice or\n    // if current state.selectedKey (from addressbar) is match to the link\n    if (this.props.selectedKey !== undefined) {\n      return link.key === this.props.selectedKey;\n    } else if (this.state.selectedKey !== undefined && link.key === this.state.selectedKey) {\n      return true;\n    }\n\n    // resolve is not supported for ssr\n    if (typeof (window) === 'undefined') {\n      return false;\n    }\n\n    if (!link.url) {\n      return false;\n    }\n\n    _urlResolver = _urlResolver || document.createElement('a');\n\n    _urlResolver.href = link.url || '';\n    const target: string = _urlResolver.href;\n\n    if (location.href === target) {\n      return true;\n    }\n\n    if (location.protocol + '//' + location.host + location.pathname === target) {\n      return true;\n    }\n\n    if (location.hash) {\n      // Match the hash to the url.\n      if (location.hash === link.url) {\n        return true;\n      }\n\n      // Match a rebased url. (e.g. #foo becomes http://hostname/foo)\n      _urlResolver.href = location.hash.substring(1);\n\n      return _urlResolver.href === target;\n    }\n    return false;\n  }\n}\n"]}