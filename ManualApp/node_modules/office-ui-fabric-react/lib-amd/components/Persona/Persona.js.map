{"version":3,"file":"Persona.js","sourceRoot":"../src/","sources":["components/Persona/Persona.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  BaseComponent,\n  autobind,\n  css,\n  divProperties,\n  getInitials,\n  getNativeProps,\n  getRTL,\n  IRenderFunction\n} from '../../Utilities';\nimport { Icon } from '../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../Image';\nimport {\n  IPersonaProps,\n  PersonaInitialsColor,\n  PersonaPresence,\n  PersonaSize\n} from './Persona.Props';\nimport {\n  PERSONA_INITIALS_COLOR,\n  PERSONA_PRESENCE,\n  PERSONA_SIZE\n} from './PersonaConsts';\nimport * as stylesImport from './Persona.scss';\nconst styles: any = stylesImport;\n\nconst SIZE_TO_PIXELS = {\n  [PersonaSize.extraExtraSmall]: 24,\n  [PersonaSize.size28]: 28,\n  [PersonaSize.tiny]: 30,\n  [PersonaSize.extraSmall]: 32,\n  [PersonaSize.small]: 40,\n  [PersonaSize.regular]: 48,\n  [PersonaSize.large]: 72,\n  [PersonaSize.extraLarge]: 100\n};\n\n// The RGB color swatches\nconst COLOR_SWATCHES_LOOKUP: PersonaInitialsColor[] = [\n  PersonaInitialsColor.lightGreen,\n  PersonaInitialsColor.lightBlue,\n  PersonaInitialsColor.lightPink,\n  PersonaInitialsColor.green,\n  PersonaInitialsColor.darkGreen,\n  PersonaInitialsColor.pink,\n  PersonaInitialsColor.magenta,\n  PersonaInitialsColor.purple,\n  PersonaInitialsColor.black,\n  PersonaInitialsColor.teal,\n  PersonaInitialsColor.blue,\n  PersonaInitialsColor.darkBlue,\n  PersonaInitialsColor.orange,\n  PersonaInitialsColor.darkRed,\n  PersonaInitialsColor.red\n];\n\nconst COLOR_SWATCHES_NUM_ENTRIES = COLOR_SWATCHES_LOOKUP.length;\n\nexport interface IPersonaState {\n  isImageLoaded?: boolean;\n}\n\nexport class Persona extends BaseComponent<IPersonaProps, IPersonaState> {\n  public static defaultProps: IPersonaProps = {\n    primaryText: '',\n    size: PersonaSize.regular,\n    presence: PersonaPresence.none,\n    imageAlt: ''\n  };\n\n  constructor(props: IPersonaProps) {\n    super(props);\n\n    this.state = {\n      isImageLoaded: false,\n    };\n  }\n\n  public render() {\n    let {\n      className,\n      imageUrl,\n      imageAlt,\n      initialsColor,\n      presence,\n      primaryText,\n      secondaryText,\n      tertiaryText,\n      optionalText,\n      hidePersonaDetails,\n      imageShouldFadeIn,\n      onRenderInitials = this._onRenderInitials,\n      onRenderPrimaryText,\n      onRenderSecondaryText,\n      onRenderTertiaryText,\n      onRenderOptionalText,\n      imageShouldStartVisible\n    } = this.props;\n    let size = this.props.size as PersonaSize;\n\n    initialsColor = initialsColor !== undefined && initialsColor !== null ? initialsColor : this._getColorFromName(primaryText);\n\n    let presenceElement = null;\n    if (presence !== PersonaPresence.none) {\n      let userPresence = PersonaPresence[presence as PersonaPresence],\n        statusIcon = null;\n      switch (userPresence) {\n        case 'online':\n          userPresence = 'SkypeCheck';\n          break;\n        case 'away':\n          userPresence = 'SkypeClock';\n          break;\n        case 'dnd':\n          userPresence = 'SkypeMinus';\n          break;\n        default:\n          userPresence = '';\n      }\n      if (userPresence) {\n        statusIcon = (\n          <Icon className={ css('ms-Persona-presenceIcon', styles.presenceIcon) } iconName={ userPresence } />\n        );\n      }\n      presenceElement = <div className={ css('ms-Persona-presence', styles.presence) }>{ statusIcon }</div>;\n    }\n\n    let divProps = getNativeProps(this.props, divProperties);\n    let personaDetails = <div className={ css('ms-Persona-details', styles.details) }>\n      { this._renderElement(\n        this.props.primaryText,\n        css('ms-Persona-primaryText', styles.primaryText),\n        onRenderPrimaryText) }\n      { this._renderElement(\n        this.props.secondaryText,\n        css('ms-Persona-secondaryText', styles.secondaryText),\n        onRenderSecondaryText) }\n      { this._renderElement(\n        this.props.tertiaryText,\n        css('ms-Persona-tertiaryText', styles.tertiaryText),\n        onRenderTertiaryText) }\n      { this._renderElement(\n        this.props.optionalText,\n        css('ms-Persona-optionalText', styles.optionalText),\n        onRenderOptionalText) }\n      { this.props.children }\n    </div>;\n\n    return (\n      <div\n        { ...divProps }\n        className={ css('ms-Persona', styles.root, className, PERSONA_SIZE[size], PERSONA_PRESENCE[presence as PersonaPresence], this.props.showSecondaryText ? styles.showSecondaryText : '') }\n      >\n        { size !== PersonaSize.tiny && (\n          <div className={ css('ms-Persona-imageArea', styles.imageArea) }>\n            {\n              !this.state.isImageLoaded &&\n              (\n                <div\n                  className={ css(\n                    'ms-Persona-initials',\n                    styles.initials,\n                    PERSONA_INITIALS_COLOR[initialsColor]\n                  ) }\n                  aria-hidden='true'\n                >\n                  { onRenderInitials(this.props, this._onRenderInitials) }\n                </div>\n              )\n            }\n            <Image\n              className={ css('ms-Persona-image', styles.image) }\n              imageFit={ ImageFit.cover }\n              src={ imageUrl }\n              width={ SIZE_TO_PIXELS[size] }\n              height={ SIZE_TO_PIXELS[size] }\n              alt={ imageAlt }\n              shouldFadeIn={ imageShouldFadeIn }\n              shouldStartVisible={ imageShouldStartVisible }\n              onLoadingStateChange={ this._onPhotoLoadingStateChange } />\n          </div>\n        ) }\n        { presenceElement }\n        { (!hidePersonaDetails || (size === PersonaSize.tiny)) && personaDetails }\n      </div>\n    );\n  }\n\n  @autobind\n  private _renderElement(text: string | undefined, className: string, render?: IRenderFunction<IPersonaProps>): JSX.Element {\n    return (\n      <div className={ className }>\n        { render ? render(this.props) : text }\n      </div>\n    );\n  }\n\n  @autobind\n  private _onRenderInitials(props: IPersonaProps): JSX.Element {\n    let {\n      imageInitials,\n      primaryText\n    } = props;\n\n    let isRTL = getRTL();\n\n    imageInitials = imageInitials || getInitials(primaryText, isRTL);\n\n    return (\n      <span>{ imageInitials }</span>\n    );\n  }\n\n  private _getColorFromName(displayName: string | undefined): PersonaInitialsColor {\n    let color = PersonaInitialsColor.blue;\n    if (!displayName) {\n      return color;\n    }\n\n    let hashCode = 0;\n    for (let iLen: number = displayName.length - 1; iLen >= 0; iLen--) {\n      const ch: number = displayName.charCodeAt(iLen);\n      const shift: number = iLen % 8;\n      // tslint:disable-next-line:no-bitwise\n      hashCode ^= (ch << shift) + (ch >> (8 - shift));\n    }\n\n    color = COLOR_SWATCHES_LOOKUP[hashCode % COLOR_SWATCHES_NUM_ENTRIES];\n\n    return color;\n  }\n\n  @autobind\n  private _onPhotoLoadingStateChange(loadState: ImageLoadState) {\n    this.setState({\n      isImageLoaded: loadState === ImageLoadState.loaded\n    });\n  }\n}\n"]}