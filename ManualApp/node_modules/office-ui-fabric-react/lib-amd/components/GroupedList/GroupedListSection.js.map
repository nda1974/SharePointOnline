{"version":3,"file":"GroupedListSection.js","sourceRoot":"../src/","sources":["components/GroupedList/GroupedListSection.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  IGroup,\n  IGroupDividerProps\n} from './GroupedList.Props';\n\nimport {\n  IDragDropContext,\n  IDragDropEvents,\n  IDragDropHelper\n} from '../../utilities/dragdrop/index';\n\nimport {\n  BaseComponent,\n  IRenderFunction,\n  IDisposable,\n  autobind\n} from '../../Utilities';\n\nimport {\n  ISelection,\n  SelectionMode,\n  SELECTION_CHANGE\n} from '../../utilities/selection/index';\n\nimport { GroupFooter } from './GroupFooter';\nimport { GroupHeader } from './GroupHeader';\n\nimport {\n  List\n} from '../../List';\nimport {\n  IDragDropOptions\n} from './../../utilities/dragdrop/interfaces';\nimport { assign, css } from '../../Utilities';\nimport { IViewport } from '../../utilities/decorators/withViewport';\nimport * as stylesImport from './GroupedList.scss';\nconst styles: any = stylesImport;\n\nexport interface IGroupedListSectionProps extends React.Props<GroupedListSection> {\n  /**\n   * Gets the component ref.\n   */\n  componentRef?: () => void;\n\n  /** Map of callback functions related to drag and drop functionality. */\n  dragDropEvents?: IDragDropEvents;\n\n  /** helper to manage drag/drop across item rows and groups */\n  dragDropHelper?: IDragDropHelper;\n\n  /** Event names and corresponding callbacks that will be registered to the group and the rendered elements */\n  eventsToRegister?: { eventName: string, callback: (context: IDragDropContext, event?: any) => void }[];\n\n  /** Information to pass in to the group footer. */\n  footerProps?: IGroupDividerProps;\n\n  /** Grouping item limit. */\n  getGroupItemLimit?: (group: IGroup) => number;\n\n  /** Optional grouping instructions. */\n  groupIndex?: number;\n\n  /** Optional group nesting level. */\n  groupNestingDepth?: number;\n\n  /** Optional grouping instructions. */\n  group?: IGroup;\n\n  /** Information to pass in to the group header. */\n  headerProps?: IGroupDividerProps;\n\n  /** List of items to render. */\n  items: any[];\n\n  /** Optional list props to pass to list renderer.  */\n  listProps?: any;\n\n  /** Rendering callback to render the group items. */\n  onRenderCell: (\n    nestingDepth?: number,\n    item?: any,\n    index?: number\n  ) => React.ReactNode;\n\n  /** Optional selection model to track selection state.  */\n  selection?: ISelection;\n\n  /** Controls how/if the details list manages selection. */\n  selectionMode?: SelectionMode;\n\n  /** Optional Viewport, provided by the parent component. */\n  viewport?: IViewport;\n\n  /** Override for rendering the group header. */\n  onRenderGroupHeader?: IRenderFunction<IGroupDividerProps>;\n\n  /** Override for rendering the group footer. */\n  onRenderGroupFooter?: IRenderFunction<IGroupDividerProps>;\n}\n\nexport interface IGroupedListSectionState {\n  isDropping?: boolean;\n  isSelected?: boolean;\n}\n\nconst DEFAULT_DROPPING_CSS_CLASS = 'is-dropping';\n\nexport class GroupedListSection extends BaseComponent<IGroupedListSectionProps, IGroupedListSectionState> {\n  public refs: {\n    [key: string]: React.ReactInstance,\n    root: HTMLElement,\n    list: List\n  };\n\n  private _subGroups: {\n    [key: string]: GroupedListSection;\n  };\n  private _dragDropSubscription: IDisposable;\n\n  constructor(props: IGroupedListSectionProps) {\n    super(props);\n\n    let { selection, group } = props;\n\n    this._subGroups = {};\n    this.state = {\n      isDropping: false,\n      isSelected: (selection && group) ? selection.isRangeSelected(group.startIndex, group.count) : false\n    };\n  }\n\n  public componentDidMount() {\n    let { dragDropHelper, selection } = this.props;\n\n    if (dragDropHelper) {\n      this._dragDropSubscription = dragDropHelper.subscribe(this.refs.root, this._events, this._getGroupDragDropOptions());\n    }\n\n    if (selection) {\n      this._events.on(selection, SELECTION_CHANGE, this._onSelectionChange);\n    }\n  }\n\n  public componentWillUnmount() {\n    if (this._dragDropSubscription) {\n      this._dragDropSubscription.dispose();\n    }\n  }\n\n  public componentDidUpdate(previousProps: IGroupedListSectionProps) {\n    if (this.props.group !== previousProps.group ||\n      this.props.groupIndex !== previousProps.groupIndex ||\n      this.props.dragDropHelper !== previousProps.dragDropHelper) {\n      if (this._dragDropSubscription) {\n        this._dragDropSubscription.dispose();\n        delete this._dragDropSubscription;\n      }\n\n      if (this.props.dragDropHelper) {\n        this._dragDropSubscription = this.props.dragDropHelper.subscribe(this.refs.root, this._events, this._getGroupDragDropOptions());\n      }\n    }\n  }\n\n  public render(): JSX.Element {\n    let {\n      getGroupItemLimit,\n      group,\n      groupIndex,\n      headerProps,\n      footerProps,\n      viewport,\n      selectionMode,\n      onRenderGroupHeader = this._onRenderGroupHeader,\n      onRenderGroupFooter = this._onRenderGroupFooter\n    } = this.props;\n    let { isSelected } = this.state;\n    let renderCount = group && getGroupItemLimit ? getGroupItemLimit(group) : Infinity;\n    let isFooterVisible = group && !group.children && !group.isCollapsed && !group.isShowingAll &&\n      (group.count > renderCount || group.hasMoreData);\n    let hasNestedGroups = group && group.children && group.children.length > 0;\n\n    let dividerProps: IGroupDividerProps = {\n      group: group,\n      groupIndex: groupIndex,\n      groupLevel: group ? group.level : 0,\n      isSelected,\n      viewport: viewport,\n      selectionMode: selectionMode\n    };\n    let groupHeaderProps: IGroupDividerProps = assign({}, headerProps, dividerProps);\n    let groupFooterProps: IGroupDividerProps = assign({}, footerProps, dividerProps);\n\n    return (\n      <div\n        ref='root'\n        className={ css('ms-GroupedList-group', styles.group, this._getDroppingClassName()) }\n        role='presentation'\n      >\n        { onRenderGroupHeader(groupHeaderProps, this._onRenderGroupHeader) }\n        {\n          group && group.isCollapsed ?\n            null :\n            (\n              hasNestedGroups ?\n                (\n                  <List\n                    ref='list'\n                    items={ group!.children }\n                    onRenderCell={ this._renderSubGroup }\n                    getItemCountForPage={ () => 1 }\n                  />\n                ) :\n                this._onRenderGroup(renderCount)\n            )\n        }\n        { isFooterVisible && onRenderGroupFooter(groupFooterProps, this._onRenderGroupFooter) }\n      </div>\n    );\n  }\n\n  public forceUpdate() {\n    super.forceUpdate();\n    this.forceListUpdate();\n  }\n\n  public forceListUpdate() {\n    let { group } = this.props;\n\n    if (this.refs.list) {\n      this.refs.list.forceUpdate();\n\n      if (group && group.children && group.children.length > 0) {\n        let subGroupCount = group.children.length;\n\n        for (let i = 0; i < subGroupCount; i++) {\n          let subGroup = this.refs.list.refs['subGroup_' + String(i)] as GroupedListSection;\n\n          if (subGroup) {\n            subGroup.forceListUpdate();\n          }\n        }\n      }\n    } else {\n      let subGroup = this.refs['subGroup_' + String(0)] as GroupedListSection;\n\n      if (subGroup) {\n        subGroup.forceListUpdate();\n      }\n    }\n  }\n\n  @autobind\n  private _onRenderGroupHeader(props: IGroupDividerProps) {\n    return <GroupHeader { ...props } />;\n  }\n\n  @autobind\n  private _onRenderGroupFooter(props: IGroupDividerProps) {\n    return <GroupFooter { ...props } />;\n  }\n\n  private _onSelectionChange() {\n    let { group, selection } = this.props;\n    let isSelected = selection!.isRangeSelected(group!.startIndex, group!.count);\n\n    if (isSelected !== this.state.isSelected) {\n      this.setState({ isSelected });\n    }\n  }\n\n  private _onRenderGroup(renderCount: number) {\n    let {\n      group,\n      items,\n      onRenderCell,\n      listProps,\n      groupNestingDepth\n    } = this.props;\n    let count = group ? group.count : items.length;\n    let startIndex = group ? group.startIndex : 0;\n\n    return (\n      <List\n        items={ items }\n        onRenderCell={ (item, itemIndex) => onRenderCell(groupNestingDepth, item, itemIndex) }\n        ref={ 'list' }\n        renderCount={ Math.min(count, renderCount) }\n        startIndex={ startIndex }\n        { ...listProps }\n      />\n    );\n  }\n\n  @autobind\n  private _renderSubGroup(subGroup: any, subGroupIndex: number) {\n    let {\n      dragDropEvents,\n      dragDropHelper,\n      eventsToRegister,\n      getGroupItemLimit,\n      groupNestingDepth,\n      items,\n      headerProps,\n      footerProps,\n      listProps,\n      onRenderCell,\n      selection,\n      selectionMode,\n      viewport,\n      onRenderGroupHeader,\n      onRenderGroupFooter\n    } = this.props;\n\n    return (!subGroup || subGroup.count > 0) ? (\n      <GroupedListSection\n        ref={ 'subGroup_' + subGroupIndex }\n        key={ this._getGroupKey(subGroup, subGroupIndex) }\n        dragDropEvents={ dragDropEvents }\n        dragDropHelper={ dragDropHelper }\n        eventsToRegister={ eventsToRegister }\n        footerProps={ footerProps }\n        getGroupItemLimit={ getGroupItemLimit }\n        group={ subGroup }\n        groupIndex={ subGroupIndex }\n        groupNestingDepth={ groupNestingDepth }\n        headerProps={ headerProps }\n        items={ items }\n        listProps={ listProps }\n        onRenderCell={ onRenderCell }\n        selection={ selection }\n        selectionMode={ selectionMode }\n        viewport={ viewport }\n        onRenderGroupHeader={ onRenderGroupHeader }\n        onRenderGroupFooter={ onRenderGroupFooter }\n      />\n    ) : null;\n  }\n\n  private _getGroupKey(group: any, index: number) {\n    return 'group-' + ((group && group.key) ? group.key : String(group.level) + String(index));\n  }\n\n  /**\n   * collect all the data we need to enable drag/drop for a group\n   */\n  @autobind\n  private _getGroupDragDropOptions(): IDragDropOptions {\n    let { group, groupIndex, dragDropEvents, eventsToRegister } = this.props;\n    let options = {\n      eventMap: eventsToRegister,\n      selectionIndex: -1,\n      context: { data: group, index: groupIndex, isGroup: true },\n      canDrag: () => false, // cannot drag groups\n      canDrop: dragDropEvents!.canDrop,\n      updateDropState: this._updateDroppingState\n    };\n    return options as IDragDropOptions;\n  }\n\n  /**\n   * update groupIsDropping state based on the input value, which is used to change style during drag and drop\n   *\n   * @private\n   * @param {boolean} newValue (new isDropping state value)\n   * @param {DragEvent} event (the event trigger dropping state change which can be dragenter, dragleave etc)\n   */\n  @autobind\n  private _updateDroppingState(newIsDropping: boolean, event: DragEvent) {\n    let { isDropping } = this.state;\n    let { dragDropEvents } = this.props;\n\n    if (!isDropping) {\n      if (dragDropEvents && dragDropEvents.onDragLeave) {\n        dragDropEvents.onDragLeave!(event, undefined);\n      }\n    } else {\n      if (dragDropEvents && dragDropEvents.onDragEnter) {\n        dragDropEvents.onDragEnter(event, undefined);\n      }\n    }\n\n    if (isDropping !== newIsDropping) {\n      this.setState({ isDropping: newIsDropping });\n    }\n  }\n\n  /**\n   * get the correct css class to reflect the dropping state for a given group\n   *\n   * If the group is the current drop target, return the default dropping class name\n   * Otherwise, return '';\n   *\n   */\n  private _getDroppingClassName(): string {\n    let { isDropping } = this.state;\n    let { group } = this.props;\n\n    isDropping = !!(group && isDropping);\n\n    return css(\n      isDropping && DEFAULT_DROPPING_CSS_CLASS,\n      isDropping && styles.groupIsDropping\n    );\n  }\n}\n"]}