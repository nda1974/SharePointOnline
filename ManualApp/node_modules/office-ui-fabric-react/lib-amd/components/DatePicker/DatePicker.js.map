{"version":3,"file":"DatePicker.js","sourceRoot":"../src/","sources":["components/DatePicker/DatePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  IDatePickerProps,\n  IDatePickerStrings\n} from './DatePicker.Props';\nimport {\n  Calendar,\n  DayOfWeek\n} from '../../Calendar';\nimport { Callout } from '../../Callout';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { TextField } from '../../TextField';\nimport {\n  autobind,\n  BaseComponent,\n  KeyCodes,\n  css\n} from '../../Utilities';\nimport { compareDates } from '../../utilities/dateMath/DateMath';\nimport * as stylesImport from './DatePicker.scss';\nconst styles: any = stylesImport;\n\nexport interface IDatePickerState {\n  /** The currently focused date in the drop down, but not necessarily selected */\n  navigatedDate?: Date;\n  selectedDate?: Date;\n  formattedDate?: string;\n  isDatePickerShown?: boolean;\n  errorMessage?: string;\n}\n\nconst DEFAULT_STRINGS: IDatePickerStrings = {\n  months: [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ],\n\n  shortMonths: [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec'\n  ],\n\n  days: [\n    'Sunday',\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday'\n  ],\n\n  shortDays: [\n    'S',\n    'M',\n    'T',\n    'W',\n    'T',\n    'F',\n    'S'\n  ],\n\n  goToToday: 'Go to today',\n  prevMonthAriaLabel: 'Go to previous month',\n  nextMonthAriaLabel: 'Go to next month',\n  prevYearAriaLabel: 'Go to previous year',\n  nextYearAriaLabel: 'Go to next year'\n};\n\nexport class DatePicker extends BaseComponent<IDatePickerProps, IDatePickerState> {\n  public static defaultProps: IDatePickerProps = {\n    allowTextInput: false,\n    formatDate: (date: Date) => {\n      if (date) {\n        return date.toDateString();\n      }\n\n      return '';\n    },\n    parseDateFromString: (dateStr: string) => {\n      const date = Date.parse(dateStr);\n      if (date) {\n        return new Date(date);\n      }\n\n      return null;\n    },\n    firstDayOfWeek: DayOfWeek.Sunday,\n    isRequired: false,\n    isMonthPickerVisible: true,\n    strings: DEFAULT_STRINGS,\n    borderless: false,\n    pickerAriaLabel: 'Calender',\n  };\n\n  public refs: {\n    [key: string]: React.ReactInstance;\n    root: HTMLElement;\n    textField: TextField;\n  };\n\n  private _calendar: Calendar;\n  private _datepicker: HTMLDivElement;\n  private _preventFocusOpeningPicker: boolean;\n  private _focusOnSelectedDateOnUpdate: boolean;\n\n  constructor(props: IDatePickerProps) {\n    super();\n\n    let { formatDate, value } = props;\n\n    this.state = {\n      selectedDate: value || new Date(),\n      formattedDate: (formatDate && value) ? formatDate(value) : '',\n      isDatePickerShown: false,\n      errorMessage: undefined\n    };\n\n    this._preventFocusOpeningPicker = false;\n  }\n\n  public componentWillReceiveProps(nextProps: IDatePickerProps) {\n    let { formatDate, isRequired, strings, value } = nextProps;\n    const errorMessage = (isRequired && !value) ? (strings!.isRequiredErrorMessage || '*') : undefined;\n\n    // Set error message\n    this.setState({\n      errorMessage: errorMessage\n    });\n\n    // Issue# 1274: Check if the date value changed from old props value, i.e., if indeed a new date is being\n    // passed in or if the formatting function was modified. We only update the selected date if either of these\n    // had a legit change. Note tha the bug will still repro when only the formatDate was passed in props and this\n    // is the result of the onSelectDate callback, but this should be a rare scenario.\n    let oldValue = this.props.value;\n    if (!compareDates(oldValue!, value!) || this.props.formatDate !== formatDate) {\n      this.setState({\n        selectedDate: value || new Date(),\n        formattedDate: (formatDate && value) ? formatDate(value) : '',\n      });\n    }\n  }\n\n  public render() {\n    const {\n      firstDayOfWeek,\n      strings,\n      label,\n      isRequired,\n      disabled,\n      ariaLabel,\n      pickerAriaLabel,\n      placeholder,\n      allowTextInput,\n      borderless,\n      className\n    } = this.props;\n    const { isDatePickerShown, formattedDate, selectedDate, errorMessage } = this.state;\n\n    return (\n      <div className={ css('ms-DatePicker', styles.root, className) } ref='root'>\n        <div ref={ (c): HTMLElement => this._datepicker = c! }>\n          <TextField\n            className={ styles.textField }\n            ariaLabel={ ariaLabel }\n            aria-haspopup='true'\n            aria-expanded={ isDatePickerShown }\n            required={ isRequired }\n            disabled={ disabled }\n            onKeyDown={ this._onTextFieldKeyDown }\n            onFocus={ this._onTextFieldFocus }\n            onBlur={ this._onTextFieldBlur }\n            onClick={ this._onTextFieldClick }\n            onChanged={ this._onTextFieldChanged }\n            errorMessage={ errorMessage }\n            label={ label }\n            placeholder={ placeholder }\n            borderless={ borderless }\n            iconProps={ {\n              iconName: 'Calendar',\n              className: css(\n                label ? 'ms-DatePicker-event--with-label' : 'ms-DatePicker-event--without-label',\n                label ? styles.eventWithLabel : styles.eventWithoutLabel\n              )\n            } }\n            readOnly={ !allowTextInput }\n            value={ formattedDate }\n            ref='textField'\n            role={ allowTextInput ? 'combobox' : 'menu' }\n          />\n        </div>\n        { isDatePickerShown && (\n          <Callout\n            role='dialog'\n            ariaLabel={ pickerAriaLabel }\n            isBeakVisible={ false }\n            className={ css('ms-DatePicker-callout') }\n            gapSpace={ 0 }\n            doNotLayer={ false }\n            targetElement={ this._datepicker }\n            directionalHint={ DirectionalHint.bottomLeftEdge }\n            onDismiss={ this._calendarDismissed }\n            onPositioned={ this._onCalloutPositioned }\n          >\n            <Calendar\n              onSelectDate={ this._onSelectDate }\n              onDismiss={ this._calendarDismissed }\n              isMonthPickerVisible={ this.props.isMonthPickerVisible }\n              value={ selectedDate }\n              firstDayOfWeek={ firstDayOfWeek }\n              strings={ strings! }\n              ref={ this._resolveRef('_calendar') }\n            >\n            </Calendar>\n          </Callout>\n        ) }\n      </div>\n    );\n  }\n\n  @autobind\n  private _onSelectDate(date: Date) {\n    let { formatDate, onSelectDate } = this.props;\n\n    this.setState({\n      selectedDate: date,\n      isDatePickerShown: false,\n      formattedDate: formatDate && date ? formatDate(date) : '',\n    });\n\n    if (onSelectDate) {\n      onSelectDate(date);\n    }\n  }\n\n  @autobind\n  private _onCalloutPositioned() {\n    this._calendar.focus();\n  }\n\n  @autobind\n  private _onTextFieldFocus(ev: React.FocusEvent<HTMLElement>) {\n    if (this.props.disableAutoFocus) {\n      return;\n    }\n\n    if (!this.props.allowTextInput) {\n      if (!this._preventFocusOpeningPicker) {\n        this._showDatePickerPopup();\n      } else {\n        this._preventFocusOpeningPicker = false;\n      }\n    }\n  }\n\n  @autobind\n  private _onTextFieldBlur(ev: React.FocusEvent<HTMLElement>) {\n    this._validateTextInput();\n  }\n\n  @autobind\n  private _onTextFieldChanged(newValue: string) {\n    if (this.props.allowTextInput) {\n      if (this.state.isDatePickerShown) {\n        this._dismissDatePickerPopup();\n      }\n\n      let { isRequired, value, strings } = this.props;\n\n      this.setState({\n        errorMessage: (isRequired && !value) ? (strings!.isRequiredErrorMessage || '*') : undefined,\n        formattedDate: newValue\n      });\n    }\n  }\n\n  @autobind\n  private _onTextFieldKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\n    switch (ev.which) {\n      case KeyCodes.enter:\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (!this.state.isDatePickerShown) {\n          this._showDatePickerPopup();\n        } else {\n          // When DatePicker allows input date string directly,\n          // it is expected to hit another enter to close the popup\n          if (this.props.allowTextInput) {\n            this._dismissDatePickerPopup();\n          }\n        }\n        break;\n\n      case KeyCodes.escape:\n        this._handleEscKey(ev);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  @autobind\n  private _onTextFieldClick(ev: React.MouseEvent<HTMLElement>) {\n    if (!this.state.isDatePickerShown) {\n      this._showDatePickerPopup();\n    } else {\n      if (this.props.allowTextInput) {\n        this.setState({\n          isDatePickerShown: false\n        });\n      }\n    }\n  }\n\n  private _showDatePickerPopup() {\n    if (!this.state.isDatePickerShown) {\n      this._preventFocusOpeningPicker = true;\n      this._focusOnSelectedDateOnUpdate = true;\n      this.setState({\n        isDatePickerShown: true,\n        navigatedDate: this.state.selectedDate,\n        errorMessage: ''\n      });\n    }\n  }\n\n  @autobind\n  private _dismissDatePickerPopup() {\n    if (this.state.isDatePickerShown) {\n      this.setState({\n        isDatePickerShown: false\n      });\n\n      this._validateTextInput();\n    }\n  }\n\n  /**\n   * Callback for closing the calendar callout\n   */\n  @autobind\n  private _calendarDismissed() {\n    this._preventFocusOpeningPicker = true;\n    this._dismissDatePickerPopup();\n\n    if (this.refs.textField) {\n      this.refs.textField.focus();\n    }\n  }\n\n  @autobind\n  private _handleEscKey(ev: React.KeyboardEvent<HTMLElement>) {\n    this._calendarDismissed();\n  }\n\n  @autobind\n  private _validateTextInput() {\n    let { isRequired, allowTextInput, strings, formatDate, parseDateFromString, onSelectDate } = this.props;\n    const inputValue = this.state.formattedDate;\n\n    // Do validation only if DatePicker's popup is dismissed\n    if (this.state.isDatePickerShown) {\n      return;\n    }\n\n    // Check when DatePicker is a required field but has NO input value\n    if (isRequired && !inputValue) {\n      this.setState({\n        // Since fabic react doesn't have loc support yet\n        // use the symbol '*' to represent error message\n        errorMessage: strings!.isRequiredErrorMessage || '*'\n      });\n      return;\n    }\n\n    if (allowTextInput) {\n      let date = null;\n      if (inputValue) {\n        date = parseDateFromString!(inputValue);\n        if (!date) {\n          this.setState({\n            errorMessage: strings!.invalidInputErrorMessage || '*'\n          });\n        } else {\n          this.setState({\n            selectedDate: date,\n            errorMessage: ''\n          });\n        }\n      } else {\n        // No input date string shouldn't be an error if field is not required\n        this.setState({\n          errorMessage: ''\n        });\n      }\n\n      // Execute onSelectDate callback\n      if (onSelectDate) {\n        // If no input date string or input date string is invalid\n        // date variable will be null, callback should expect null value for this case\n        onSelectDate(date);\n      }\n    }\n  }\n}\n"]}